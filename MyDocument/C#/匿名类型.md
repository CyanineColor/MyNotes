**匿名类型**（Anonymous Type）是一种由编译器**临时生成**的、**只读**的、**不可继承**的类，用于**临时存储一组只读属性**。它常用于 LINQ 查询中，方便你快速构造一个“临时对象”，而无需显式定义一个类。

---

### ✅ 基本语法

csharp

复制

```csharp
var person = new { Name = "Alice", Age = 30 };
```

- 编译器会自动生成一个类，包含两个只读属性：`Name` 和 `Age`。
    
- 类型名由编译器生成，**你无法直接引用它**。
    
- 属性是**只读**的，创建后不能修改。
    

---

### ✅ 使用场景

#### 1. LINQ 投影

csharp

复制

```csharp
var users = new[]
{
    new { Id = 1, Name = "Alice", Age = 30 },
    new { Id = 2, Name = "Bob", Age = 25 }
};

var result = users.Select(u => new { u.Name, u.Age });
```

#### 2. 临时组合数据

csharp

复制

```csharp
var summary = new { TotalUsers = 100, AverageAge = 28.5 };
```

---

### ⚠️ 注意事项

表格

复制

|特性|说明|
|:--|:--|
|**只读**|属性值一旦设置不能更改。|
|**不可继承**|匿名类型是 `sealed` 的，不能继承或实现接口。|
|**作用域小**|通常只在方法内部使用，不能作为方法返回值（除非用 `dynamic` 或 `object`）。|
|**相等性**|如果两个匿名类型的**属性名、类型、顺序、值**都相同，则它们相等。|

csharp

复制

```csharp
var a = new { X = 1, Y = 2 };
var b = new { X = 1, Y = 2 };
Console.WriteLine(a.Equals(b)); // True
```

---

### ✅ C# 10 改进：匿名类型支持 `with` 表达式（仅限 .NET 6+）

虽然匿名类型是只读的，但你可以用 `with` 创建一个新实例：

csharp

复制

```csharp
var original = new { Name = "Alice", Age = 30 };
var updated = original with { Age = 31 };
```

---

### ✅ 替代方案：使用 `record`（C# 9+）

如果你需要**命名类型**、**不可变性**、**值相等性**，可以用 `record`：

csharp

复制

```csharp
record Person(string Name, int Age);
```

---

### ✅ 总结一句话

> 匿名类型是 C# 提供的“临时数据结构”，适合 LINQ 和短期使用，**不需要写类**，但**不能修改、不能重用**。

---

如果你有具体的使用场景（比如 LINQ、API 返回、序列化等），我可以帮你判断是否该用匿名类型，还是用 `record`、`tuple` 或自定义类。